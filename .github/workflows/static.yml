name: Generate Site
run-name: ${{ github.actor }} is generating Site ðŸš€ 
on: 
  push:
    branches:
      - master
  workflow_dispatch: # Allows triggering the build manually

permissions:
  # This permission governs access to the repository's code and files.
  contents: read 
  # This permission is used for OpenID Connect (OIDC) authentication. id-token: write: Allows the workflow to generate a JSON Web Token (JWT) that can be used to authenticate with external cloud providers (like AWS, Azure, or GCP) or other services that support OIDC. This enables secure, passwordless authentication from GitHub Actions to external systems.
  id-token: write 

jobs:
  Generate-Website:
    runs-on: ubuntu-latest
    steps:
      - name: List all blog files
        run: | 
          tree .
      - name: Checkout website repository
        uses: actions/checkout@v5
        with:
          repository: ${{ secrets.OTHER_REPO }}
          token: ${{ secrets.ACCESS_PRI_REPO }}
          ref: main
      - name: Checkout blog repository
        uses: actions/checkout@v5
        with:
          ref: master
          path: ./data-blog
      - name: Copy blogs
        run: mv ./data-blog/blog ./data/
      - name: List all files
        run: | 
          tree .

